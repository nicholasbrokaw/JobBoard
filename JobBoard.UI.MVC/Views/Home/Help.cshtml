@model JobBoard.UI.MVC.Models.ContactViewModel
@using JobBoard.DATA.EF
@using Microsoft.AspNet.Identity

@{
	ViewBag.Title = "Help";

	JobBoardEntities db = new JobBoardEntities();
	string fullName = db.UserDetails.Find(User.Identity.GetUserId()).FullName;
}

@using (Html.BeginForm("Help", "Home", FormMethod.Post))
{
	@Html.AntiForgeryToken()

	<div class="form-horizontal">

		<div class="form-group">
			<div class="col-md-10">
				@Html.TextBoxFor(model => model.Subject, new { @class = "form-control" })
				@Html.ValidationMessageFor(model => model.Subject)
			</div>
		</div>

		<div class="form-group">
			<div class="col-md-10">
				@Html.TextAreaFor(model => model.Message, new { @class = "form-control" })
				@Html.ValidationMessageFor(model => model.Message)
			</div>
		</div>

		<input type="submit" value="Submit" class="btn btn-primary" />
		@if (ViewBag.emailError != null)
		{
			<div class="alert alert-danger mt-1">
				@ViewBag.emailError
			</div>
		}
		else if (TempData["emailSuccess"] != null)
		{
			<div class="alert alert-success mt-1">
				@if (TempData["demoMode"] == null)
				{<p>We have recieved your email! Please know that you will receive a response within 1 to 2 business days.</p>}
				else
				{
					<p>Great! Everything checked out; however, the email did not send because we are running in demo mode.</p>
				}</div>
		}
	</div>
}